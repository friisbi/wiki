{# Ghost Button Macro
   Usage:
   {{ ghost_button(text="Click me", icon="clipboard", href="/path", click="handleClick()") }}

   Parameters:
   - text: Button text (required)
   - icon: Icon name - clipboard, check, edit, sun, moon, chevron-left, chevron-right, collapse, expand (optional)
   - href: If provided, renders as <a> tag, otherwise <button> (optional)
   - click: Alpine.js @click handler (optional)
   - x_show: Alpine.js x-show condition (optional)
   - x_text: Alpine.js x-text for dynamic text (optional)
   - extra_classes: Additional CSS classes (optional)
   - icon_classes: Additional classes for the icon (optional)
#}

{% macro ghost_button(text="", icon="", href="", click="", x_show="", x_text="", extra_classes="", icon_classes="") %}
    {% set base_classes = "inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-[var(--ink-gray-5)] hover:text-[var(--ink-gray-9)] hover:bg-[var(--surface-gray-2)] rounded-md transition-colors duration-200 cursor-pointer" %}

    {% if href %}
    <a href="{{ href }}"
       class="{{ base_classes }} {{ extra_classes }}"
       {% if x_show %}x-show="{{ x_show }}"{% endif %}>
        {{ render_icon(icon, icon_classes) }}
        {% if x_text %}
        <span x-text="{{ x_text }}">{{ text }}</span>
        {% else %}
        <span>{{ text }}</span>
        {% endif %}
    </a>
    {% else %}
    <button {% if click %}@click="{{ click }}"{% endif %}
            class="{{ base_classes }} {{ extra_classes }}"
            {% if x_show %}x-show="{{ x_show }}"{% endif %}>
        {{ render_icon(icon, icon_classes) }}
        {% if x_text %}
        <span x-text="{{ x_text }}">{{ text }}</span>
        {% else %}
        <span>{{ text }}</span>
        {% endif %}
    </button>
    {% endif %}
{% endmacro %}

{# Full-width Ghost Button (for sidebar footer buttons) #}
{% macro ghost_button_full(text="", icon="", click="", x_show="", x_text="", extra_classes="", icon_classes="") %}
    {% set base_classes = "w-full flex items-center justify-center px-3 py-2 text-sm font-medium text-[var(--ink-gray-5)] hover:text-[var(--ink-gray-9)] hover:bg-[var(--surface-gray-2)] rounded-md transition-colors duration-200 cursor-pointer" %}

    <button {% if click %}@click="{{ click }}"{% endif %}
            class="{{ base_classes }} {{ extra_classes }}"
            {% if x_show %}x-show="{{ x_show }}"{% endif %}>
        {{ render_icon(icon, icon_classes) }}
        {% if x_text %}
        <span x-text="{{ x_text }}">{{ text }}</span>
        {% else %}
        <span>{{ text }}</span>
        {% endif %}
    </button>
{% endmacro %}

{# Icon Button (small square button, like the expand sidebar button) #}
{% macro icon_button(icon="", click="", x_show="", extra_classes="", icon_classes="") %}
    {% set base_classes = "flex items-center justify-center w-10 h-10 bg-[var(--surface-white)] border border-[var(--outline-gray-1)] rounded-md shadow-md hover:shadow-lg hover:bg-[var(--surface-gray-1)] transition-all duration-200 cursor-pointer" %}

    <button {% if click %}@click="{{ click }}"{% endif %}
            class="{{ base_classes }} {{ extra_classes }}"
            {% if x_show %}x-show="{{ x_show }}"{% endif %}>
        {{ render_icon(icon, icon_classes if icon_classes else "w-5 h-5 text-[var(--ink-gray-5)]") }}
    </button>
{% endmacro %}

{# Icon Renderer Helper #}
{% macro render_icon(icon, extra_classes="") %}
    {% set icon_base_classes = "w-4 h-4 " ~ extra_classes %}

    {% if icon == "clipboard" %}
    <svg class="{{ icon_base_classes }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
    </svg>
    {% elif icon == "check" %}
    <svg class="{{ icon_base_classes }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
    </svg>
    {% elif icon == "edit" %}
    <svg class="{{ icon_base_classes }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
    </svg>
    {% elif icon == "sun" %}
    <svg class="{{ icon_base_classes }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
    </svg>
    {% elif icon == "moon" %}
    <svg class="{{ icon_base_classes }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
    </svg>
    {% elif icon == "chevron-left" %}
    <svg class="{{ icon_base_classes }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
    </svg>
    {% elif icon == "chevron-right" %}
    <svg class="{{ icon_base_classes }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
    </svg>
    {% elif icon == "menu" %}
    <svg class="{{ icon_base_classes }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
    {% elif icon == "x" %}
    <svg class="{{ icon_base_classes }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
    </svg>
    {% elif icon == "list" %}
    <svg class="{{ icon_base_classes }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
    </svg>
    {% elif icon == "search" %}
    <svg class="{{ icon_base_classes }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
    </svg>
    {% endif %}
{% endmacro %}
